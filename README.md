
# MODX HTML Cache Plugin

Плагин для MODX, который сохраняет сгенерированные страницы в HTML-файлы и отдает их напрямую без парсинга MODX.  
Это позволяет значительно ускорить работу сайта на фронтенде.

## Поддерживаемые события

- `OnLoadWebDocument` — проверяет, есть ли готовый кэш-файл.  
  Если найден, выводит его содержимое и завершает выполнение.

- `OnWebPagePrerender` — сохраняет HTML-страницу в кэш при первом запросе.

- `OnDocFormSave` — при сохранении документа в админке удаляет связанные кэш-файлы, чтобы при следующем запросе они сгенерировались заново.

## Структура кэша

Файлы сохраняются в директории:

```

core/cache/html_pages/{template_id}/

```

Имя файла формируется так:

```

{resource_id}_{md5(uri)}.html

```

Пример:

```

core/cache/html_pages/2/15_a6c0f9f17d3f5d8b8f34a1b4f5d2e3a1.html

````

## Настройки

В коде плагина задаётся массив `template_ids`:

```php
$template_ids = [1,7,2,3,4,6,11,12,20];
````

Кэширование будет работать **только для этих шаблонов**.

## Установка

1. Создать новый плагин в MODX.

2. Привязать к событиям:

   * `OnLoadWebDocument`
   * `OnWebPagePrerender`
   * `OnDocFormSave`
3. Очистить системный кэш MODX.

## Ограничения

* Кэш работает только в контексте `web`.
* Если в шаблоне есть динамические данные (например, корзина, личный кабинет), лучше исключить его из кэширования.
* На боевом сервере убедитесь, что директория `core/cache/html_pages/` доступна для записи.
